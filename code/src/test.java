class Main {
    public static void main(String[] args) {
        String s = "(!17|6|!5|6|18)&(4|!19|!4|1|!11)&(!20|20|20|!13|!3)&(!17|16|!3|3|!9)&(4|!15|!15|!14|!14)&(4|15|3|4|!13)&(7|7|!13|!19|!17)&(!17|!18|2|!19|!4)&(!3|!16|!7|!15|19)&(6|7|!14|!1|!20)&(!6|16|4|!16|6)&(18|!20|14|!2|9)&(7|15|!2|14|!8)&(!20|20|!11|18|9)&(15|!6|!17|!17|19)&(9|2|7|3|6)&(!11|!10|!13|!14|!3)&(!5|3|!6|!2|!15)&(3|15|!18|13|!18)&(5|!18|5|8|2)&(!12|18|20|2|!16)&(16|!16|!7|!15|!13)&(14|!3|4|1|12)&(!3|!6|20|5|!19)&(15|!8|!11|!14|!11)&(!7|3|16|13|!16)&(19|20|!15|2|10)&(19|12|!8|18|!15)&(!4|15|20|17|4)&(5|!10|17|!6|!16)&(!15|!17|!17|13|!2)&(7|17|!16|!4|17)&(5|15|4|16|2)&(!8|!2|!17|!20|!20)&(10|14|5|4|15)&(9|!6|!10|2|3)&(!2|10|!2|11|4)&(!15|!7|!14|!11|!7)&(2|19|!11|3|3)&(5|10|!18|!8|14)&(5|11|20|!3|7)&(3|!16|!9|!19|13)&(!18|6|!1|14|10)&(11|!1|!16|!8|!20)&(16|20|!6|!2|!6)&(!6|!7|20|2|8)&(!18|8|!8|!11|!9)&(!17|!3|18|11|!14)&(!15|!3|1|!9|10)&(!7|!17|!8|!11|13)";
        CnfConstructor cons = new CnfConstructor();
        CNF cnf = cons.string2CNF(s);
        Solver so = new Solver(cnf);
        String result = so.solveSAT();
        if (result == null) {
            System.out.println("UNSAT");
        } else {
            System.out.println("SAT");
            System.out.println(result);
        }
    }
}